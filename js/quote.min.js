"use strict";import{i as S}from"./index.min2.js";import"./common.min.js";window.addEventListener("load",()=>{S();const a=document.querySelector(".multi-step-form");if(a){let m=function(r){if(!r)return!1;const s=r.value.trim(),e=r.closest(".form-group"),t=e?.querySelector("[data-zip-error]");return t&&t.remove(),r.classList.remove("--form-error","--form-success"),e&&e.classList.remove("--form-error","--form-success"),s===""?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-zip-error>Zip code field can not be empty</div>")),!1):s.length!==5||!/^\d{5}$/.test(s)?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-zip-error>Wrong zip code format</div>")),!1):(r.classList.add("--form-success"),e&&e.classList.add("--form-success"),!0)},b=function(r){r&&(r.addEventListener("input",s=>{let e=s.target.value.replace(/\D/g,"");e.length>5&&(e=e.slice(0,5)),s.target.value=e,m(s.target)}),r.addEventListener("keypress",s=>{!/[0-9]/.test(s.key)&&!["Backspace","Delete","Tab","ArrowLeft","ArrowRight"].includes(s.key)&&s.preventDefault()}),r.addEventListener("paste",s=>{s.preventDefault();const t=(s.clipboardData||window.clipboardData).getData("text").replace(/\D/g,"").slice(0,5);r.value=t,m(r)}),r.addEventListener("blur",()=>{m(r)}))},d=function(r){if(!r)return!1;const s=r.value.trim(),e=r.closest(".form-group"),t=e?.querySelector("[data-date-error]");return t&&t.remove(),r.classList.remove("--form-error","--form-success"),e&&e.classList.remove("--form-error","--form-success"),s===""||s==="Select Move Date"?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-date-error>Please select a moving date</div>")),!1):(r.classList.add("--form-success"),e&&e.classList.add("--form-success"),!0)},L=function(){const r=a.querySelector(".home-size-options");if(!r)return!1;const s=Array.from(h).find(o=>o.checked),e=r.querySelector("[data-select-error]");if(r.classList.remove("--form-error","--form-success"),h.forEach(o=>{const f=o.closest(".home-size-option");f&&f.classList.remove("--form-error","--form-success")}),e&&(e.style.display="none",e.textContent=""),!s||!s.value)return r.classList.add("--form-error"),h.forEach(o=>{const f=o.closest(".home-size-option");f&&f.classList.add("--form-error")}),e&&(e.textContent="Please select a home size",e.style.display="block"),!1;r.classList.add("--form-success");const t=s.closest(".home-size-option");return t&&t.classList.add("--form-success"),!0},y=function(r){r&&(r.addEventListener("input",s=>{let e=s.target.value.replace(/[^a-zA-Z\s]/g,"");e=e.replace(/\s+/g," "),s.target.value=e,g(s.target)}),r.addEventListener("keypress",s=>{!/[a-zA-Z\s]/.test(s.key)&&!["Backspace","Delete","Tab","ArrowLeft","ArrowRight"].includes(s.key)&&s.preventDefault()}),r.addEventListener("paste",s=>{s.preventDefault();const t=(s.clipboardData||window.clipboardData).getData("text").replace(/[^a-zA-Z\s]/g,"").replace(/\s+/g," ");r.value=t,g(r)}))},g=function(r){if(!r)return!1;const s=r.value.trim(),e=r.closest(".form-group"),t=e?.querySelector("[data-name-error]");if(t&&t.remove(),r.classList.remove("--form-error","--form-success"),e&&e.classList.remove("--form-error","--form-success"),s==="")return r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-name-error>Full name field can not be empty</div>")),!1;const o=s.split(/\s+/).filter(A=>A.length>0);return o.length<2?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-name-error>Please enter first and last name</div>")),!1):o[0].length<3?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-name-error>First name must contain at least 3 letters</div>")),!1):o[o.length-1].length<3?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-name-error>Last name must contain at least 3 letters</div>")),!1):(r.classList.add("--form-success"),e&&e.classList.add("--form-success"),!0)},n=function(r){if(!r)return!1;const s=r.value.trim(),e=r.closest(".form-group"),t=e?.querySelector("[data-phone-error]");if(t&&t.remove(),r.classList.remove("--form-error","--form-success"),e&&e.classList.remove("--form-error","--form-success"),s===""||s==="+1(___) ___-____")return r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-phone-error>Phone field can not be empty</div>")),!1;const o=s.replace(/\D/g,"");return o.length<10||o.length>11?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-phone-error>Wrong phone number format</div>")),!1):s.includes("_")||s.includes("(")&&!s.match(/\+1\(\d{3}\)\s\d{3}-\d{4}/)?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-phone-error>Please enter a complete phone number</div>")),!1):/^\+1\(\d{3}\)\s\d{3}-\d{4}$/.test(s)?(r.classList.add("--form-success"),e&&e.classList.add("--form-success"),!0):(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-phone-error>Wrong phone number format</div>")),!1)},u=function(r){if(!r)return!1;const s=r.value.trim(),e=r.closest(".form-group"),t=e?.querySelector("[data-email-error]");return t&&t.remove(),r.classList.remove("--form-error","--form-success"),e&&e.classList.remove("--form-error","--form-success"),s===""?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-email-error>Email field can not be empty</div>")),!1):!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)||!/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(s)?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-email-error>Wrong email format</div>")),!1):(r.classList.add("--form-success"),e&&e.classList.add("--form-success"),!0)};const p=a.querySelector("#zip-from"),E=a.querySelector("#zip-to");p&&b(p),E&&b(E);const i=a.querySelector("#moving-date");i&&(i.addEventListener("blur",()=>{d(i)}),i.addEventListener("input",()=>{d(i)}),i.addEventListener("change",()=>{d(i)}),setInterval(()=>{i.value&&i.value.trim()!==""&&i.value!=="Select Move Date"&&d(i)},300));const h=a.querySelectorAll('input[name="home_size"][type="radio"]');h.length>0&&h.forEach(r=>{r.addEventListener("change",()=>{L()})});const v=a.querySelector("#full-name");v&&(y(v),v.addEventListener("input",()=>{g(v)}),v.addEventListener("blur",()=>{g(v)}));const c=a.querySelector("#phone");c&&(c.addEventListener("input",()=>{n(c)}),c.addEventListener("change",()=>{n(c)}),c.addEventListener("blur",()=>{n(c)}));const l=a.querySelector("#email");l&&(l.addEventListener("input",()=>{u(l)}),l.addEventListener("change",()=>{u(l)}),l.addEventListener("blur",()=>{u(l)})),window.quoteFormValidation={validateZipCode:m,validateMovingDate:d,validateHomeSize:L,validateFullName:g,validatePhone:n,validateEmail:u,zipFromInput:p,zipToInput:E,movingDateInput:i,homeSizeRadios:h,fullNameInput:v,phoneInput:c,emailInput:l}}if(a){let m=function(){L||(L=!0,console.log("Redirecting to index.html..."),d&&clearTimeout(d),d=setTimeout(()=>{window.location.href="index.html"},1e3))},b=!1,d=null,L=!1;const y=n=>{console.log("formSent event received (success)",n),(!n.detail||n.detail.form===a)&&m()};document.addEventListener("formSent",y,{once:!1}),new MutationObserver(n=>{n.forEach(u=>{if(u.type==="attributes"&&u.attributeName==="class"){const p=a.classList.contains("--sending");b&&!p&&!L&&(console.log("Form request completed (success or error), redirecting anyway..."),m()),b=p}})}).observe(a,{attributes:!0,attributeFilter:["class"]})}});
