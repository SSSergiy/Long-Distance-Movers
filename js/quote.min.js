"use strict";import{i as A}from"./index.min2.js";import"./common.min.js";window.addEventListener("load",()=>{A();const a=document.querySelector(".multi-step-form");if(a){let u=function(r){if(!r)return!1;const s=r.value.trim(),e=r.closest(".form-group"),t=e?.querySelector("[data-zip-error]");return t&&t.remove(),r.classList.remove("--form-error","--form-success"),e&&e.classList.remove("--form-error","--form-success"),s===""?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-zip-error>Zip code field can not be empty</div>")),!1):s.length!==5||!/^\d{5}$/.test(s)?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-zip-error>Wrong zip code format</div>")),!1):(r.classList.add("--form-success"),e&&e.classList.add("--form-success"),!0)},h=function(r){r&&(r.addEventListener("input",s=>{let e=s.target.value.replace(/\D/g,"");e.length>5&&(e=e.slice(0,5)),s.target.value=e,u(s.target)}),r.addEventListener("keypress",s=>{!/[0-9]/.test(s.key)&&!["Backspace","Delete","Tab","ArrowLeft","ArrowRight"].includes(s.key)&&s.preventDefault()}),r.addEventListener("paste",s=>{s.preventDefault();const t=(s.clipboardData||window.clipboardData).getData("text").replace(/\D/g,"").slice(0,5);r.value=t,u(r)}),r.addEventListener("blur",()=>{u(r)}))},d=function(r){if(!r)return!1;const s=r.value.trim(),e=r.closest(".form-group"),t=e?.querySelector("[data-date-error]");return t&&t.remove(),r.classList.remove("--form-error","--form-success"),e&&e.classList.remove("--form-error","--form-success"),s===""||s==="Select Move Date"?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-date-error>Please select a moving date</div>")),!1):(r.classList.add("--form-success"),e&&e.classList.add("--form-success"),!0)},n=function(r){if(!r)return!1;const s=r.value?r.value.trim():"",e=r.closest(".form-group"),t=e?.querySelector(".select"),o=t?.querySelector(".select__title"),p=e?.querySelector("[data-select-error]");return p&&p.remove(),o&&o.classList.remove("--form-error","--form-success"),t&&t.classList.remove("--form-error","--form-success"),e&&e.classList.remove("--form-error","--form-success"),s===""||s===null||!s?(o&&o.classList.add("--form-error"),t&&t.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-select-error>Please select a home size</div>")),!1):(o&&o.classList.add("--form-success"),t&&t.classList.add("--form-success"),e&&e.classList.add("--form-success"),!0)},y=function(r){r&&(r.addEventListener("input",s=>{let e=s.target.value.replace(/[^a-zA-Z\s]/g,"");e=e.replace(/\s+/g," "),s.target.value=e,g(s.target)}),r.addEventListener("keypress",s=>{!/[a-zA-Z\s]/.test(s.key)&&!["Backspace","Delete","Tab","ArrowLeft","ArrowRight"].includes(s.key)&&s.preventDefault()}),r.addEventListener("paste",s=>{s.preventDefault();const t=(s.clipboardData||window.clipboardData).getData("text").replace(/[^a-zA-Z\s]/g,"").replace(/\s+/g," ");r.value=t,g(r)}))},g=function(r){if(!r)return!1;const s=r.value.trim(),e=r.closest(".form-group"),t=e?.querySelector("[data-name-error]");if(t&&t.remove(),r.classList.remove("--form-error","--form-success"),e&&e.classList.remove("--form-error","--form-success"),s==="")return r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-name-error>Full name field can not be empty</div>")),!1;const o=s.split(/\s+/).filter(T=>T.length>0);return o.length<2?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-name-error>Please enter first and last name</div>")),!1):o[0].length<3?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-name-error>First name must contain at least 3 letters</div>")),!1):o[o.length-1].length<3?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-name-error>Last name must contain at least 3 letters</div>")),!1):(r.classList.add("--form-success"),e&&e.classList.add("--form-success"),!0)},l=function(r){if(!r)return!1;const s=r.value.trim(),e=r.closest(".form-group"),t=e?.querySelector("[data-phone-error]");if(t&&t.remove(),r.classList.remove("--form-error","--form-success"),e&&e.classList.remove("--form-error","--form-success"),s===""||s==="+1(___) ___-____")return r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-phone-error>Phone field can not be empty</div>")),!1;const o=s.replace(/\D/g,"");return o.length<10||o.length>11?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-phone-error>Wrong phone number format</div>")),!1):s.includes("_")||s.includes("(")&&!s.match(/\+1\(\d{3}\)\s\d{3}-\d{4}/)?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-phone-error>Please enter a complete phone number</div>")),!1):/^\+1\(\d{3}\)\s\d{3}-\d{4}$/.test(s)?(r.classList.add("--form-success"),e&&e.classList.add("--form-success"),!0):(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-phone-error>Wrong phone number format</div>")),!1)},v=function(r){if(!r)return!1;const s=r.value.trim(),e=r.closest(".form-group"),t=e?.querySelector("[data-email-error]");return t&&t.remove(),r.classList.remove("--form-error","--form-success"),e&&e.classList.remove("--form-error","--form-success"),s===""?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-email-error>Email field can not be empty</div>")),!1):!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)||!/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(s)?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-email-error>Wrong email format</div>")),!1):(r.classList.add("--form-success"),e&&e.classList.add("--form-success"),!0)};const b=a.querySelector("#zip-from"),E=a.querySelector("#zip-to");b&&h(b),E&&h(E);const i=a.querySelector("#moving-date");i&&(i.addEventListener("blur",()=>{d(i)}),i.addEventListener("input",()=>{d(i)}),i.addEventListener("change",()=>{d(i)}),setInterval(()=>{i.value&&i.value.trim()!==""&&i.value!=="Select Move Date"&&d(i)},300));const c=a.querySelector('select[name="home_size"]')||a.querySelector("#home-size");if(c){let r=function(){const o=c?.closest(".form-group")?.querySelector(".select");o?o.querySelectorAll(".select__option").forEach(S=>{S.removeEventListener("click",s),S.addEventListener("click",s)}):setTimeout(r,100)},s=function(){setTimeout(()=>{n(c)},150)};c.addEventListener("change",()=>{n(c)}),r(),c.addEventListener("blur",()=>{n(c)}),setInterval(()=>{c.value&&c.value.trim()!==""&&n(c)},300);const e=a.querySelector(".select__content");e&&new MutationObserver(()=>{n(c)}).observe(e,{childList:!0,characterData:!0,subtree:!0})}const L=a.querySelector("#full-name");L&&(y(L),L.addEventListener("input",()=>{g(L)}),L.addEventListener("blur",()=>{g(L)}));const f=a.querySelector("#phone");f&&(f.addEventListener("input",()=>{l(f)}),f.addEventListener("change",()=>{l(f)}),f.addEventListener("blur",()=>{l(f)}));const m=a.querySelector("#email");m&&(m.addEventListener("input",()=>{v(m)}),m.addEventListener("change",()=>{v(m)}),m.addEventListener("blur",()=>{v(m)})),window.quoteFormValidation={validateZipCode:u,validateMovingDate:d,validateHomeSize:n,validateFullName:g,validatePhone:l,validateEmail:v,zipFromInput:b,zipToInput:E,movingDateInput:i,homeSizeSelect:c,fullNameInput:L,phoneInput:f,emailInput:m}}if(a){let u=function(){n||(n=!0,console.log("Redirecting to index.html..."),d&&clearTimeout(d),d=setTimeout(()=>{window.location.href="index.html"},1e3))},h=!1,d=null,n=!1;const y=l=>{console.log("formSent event received (success)",l),(!l.detail||l.detail.form===a)&&u()};document.addEventListener("formSent",y,{once:!1}),new MutationObserver(l=>{l.forEach(v=>{if(v.type==="attributes"&&v.attributeName==="class"){const b=a.classList.contains("--sending");h&&!b&&!n&&(console.log("Form request completed (success or error), redirecting anyway..."),u()),h=b}})}).observe(a,{attributes:!0,attributeFilter:["class"]})}});
