"use strict";import{i as k}from"./index.min2.js";import"./common.min.js";function d(s,m,g){if(!s)return;const u=m.replace(/[\[\]]/g,"");let L=s.querySelector(m);L?L.textContent=g:s.insertAdjacentHTML("beforeend",`<div ${u}>${g}</div>`)}window.addEventListener("load",()=>{k();const s=document.querySelector(".multi-step-form");if(s){let m=function(r){if(!r)return!1;const t=r.value.trim(),e=r.closest(".form-group");return r.classList.remove("--form-error","--form-success"),e&&e.classList.remove("--form-error","--form-success"),t===""?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),d(e,"[data-zip-error]","Zip code field can not be empty")),!1):t.length!==5||!/^\d{5}$/.test(t)?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),d(e,"[data-zip-error]","Wrong zip code format")),!1):(r.classList.add("--form-success"),e&&e.classList.add("--form-success"),!0)},g=function(r){r&&(r.addEventListener("input",t=>{let e=t.target.value.replace(/\D/g,"");e.length>5&&(e=e.slice(0,5)),t.target.value=e,m(t.target)}),r.addEventListener("keypress",t=>{!/[0-9]/.test(t.key)&&!["Backspace","Delete","Tab","ArrowLeft","ArrowRight"].includes(t.key)&&t.preventDefault()}),r.addEventListener("paste",t=>{t.preventDefault();const l=(t.clipboardData||window.clipboardData).getData("text").replace(/\D/g,"").slice(0,5);r.value=l,m(r)}),r.addEventListener("blur",()=>{m(r)}))},u=function(r){if(!r)return!1;const t=r.value.trim(),e=r.closest(".form-group");return r.classList.remove("--form-error","--form-success"),e&&e.classList.remove("--form-error","--form-success"),t===""||t==="Select Move Date"?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),d(e,"[data-date-error]","Please select a moving date")),!1):(r.classList.add("--form-success"),e&&e.classList.add("--form-success"),!0)},L=function(){const r=s.querySelector(".home-size-options");if(!r)return!1;const t=Array.from(c).find(p=>p.checked),e=r.querySelector("[data-select-error]");if(r.classList.remove("--form-error","--form-success"),c.forEach(p=>{const S=p.closest(".home-size-option");S&&S.classList.remove("--form-error","--form-success")}),e&&(e.style.display="none",e.textContent=""),!t||!t.value)return r.classList.add("--form-error"),c.forEach(p=>{const S=p.closest(".home-size-option");S&&S.classList.add("--form-error")}),e&&(e.textContent="Please select a home size",e.style.display="block"),!1;r.classList.add("--form-success");const l=t.closest(".home-size-option");return l&&l.classList.add("--form-success"),!0},h=function(r){r&&(r.addEventListener("input",t=>{let e=t.target.value.replace(/[^a-zA-Z\s]/g,"");e=e.replace(/\s+/g," "),t.target.value=e,y(t.target)}),r.addEventListener("keypress",t=>{!/[a-zA-Z\s]/.test(t.key)&&!["Backspace","Delete","Tab","ArrowLeft","ArrowRight"].includes(t.key)&&t.preventDefault()}),r.addEventListener("paste",t=>{t.preventDefault();const l=(t.clipboardData||window.clipboardData).getData("text").replace(/[^a-zA-Z\s]/g,"").replace(/\s+/g," ");r.value=l,y(r)}))},y=function(r){if(!r)return!1;const t=r.value.trim(),e=r.closest(".form-group");if(r.classList.remove("--form-error","--form-success"),e&&e.classList.remove("--form-error","--form-success"),t==="")return r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),d(e,"[data-name-error]","Full name field can not be empty")),!1;const l=t.split(/\s+/).filter(D=>D.length>0);return l.length<2?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),d(e,"[data-name-error]","Please enter first and last name")),!1):l[0].length<3?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),d(e,"[data-name-error]","First name must contain at least 3 letters")),!1):l[l.length-1].length<3?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),d(e,"[data-name-error]","Last name must contain at least 3 letters")),!1):(r.classList.add("--form-success"),e&&e.classList.add("--form-success"),!0)},b=function(r){if(!r)return!1;const t=r.value.trim(),e=r.closest(".form-group");if(r.classList.remove("--form-error","--form-success"),e&&e.classList.remove("--form-error","--form-success"),t===""||t==="+1(___) ___-____")return r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),d(e,"[data-phone-error]","Phone field can not be empty")),!1;const l=t.replace(/\D/g,"");return l.length<10||l.length>11?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),d(e,"[data-phone-error]","Wrong phone number format")),!1):t.includes("_")||t.includes("(")&&!t.match(/\+1\(\d{3}\)\s\d{3}-\d{4}/)?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),d(e,"[data-phone-error]","Please enter a complete phone number")),!1):/^\+1\(\d{3}\)\s\d{3}-\d{4}$/.test(t)?(r.classList.add("--form-success"),e&&e.classList.add("--form-success"),!0):(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),d(e,"[data-phone-error]","Wrong phone number format")),!1)},E=function(r){if(!r)return!1;const t=r.value.trim(),e=r.closest(".form-group");return r.classList.remove("--form-error","--form-success"),e&&e.classList.remove("--form-error","--form-success"),t===""?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),d(e,"[data-email-error]","Email field can not be empty")),!1):!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||!/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t)?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),d(e,"[data-email-error]","Wrong email format")),!1):(r.classList.add("--form-success"),e&&e.classList.add("--form-success"),!0)};const a=s.querySelector("#zip-from"),i=s.querySelector("#zip-to");a&&g(a),i&&g(i);const o=s.querySelector("#moving-date");o&&(o.addEventListener("blur",()=>{u(o)}),o.addEventListener("input",()=>{u(o)}),o.addEventListener("change",()=>{u(o)}),setInterval(()=>{o.value&&o.value.trim()!==""&&o.value!=="Select Move Date"&&u(o)},300));const c=s.querySelectorAll('input[name="home_size"][type="radio"]');c.length>0&&c.forEach(r=>{r.addEventListener("change",()=>{L()})});const n=s.querySelector("#full-name");n&&(h(n),n.addEventListener("input",()=>{y(n)}),n.addEventListener("blur",()=>{y(n)}));const v=s.querySelector("#phone");v&&(v.addEventListener("input",()=>{b(v)}),v.addEventListener("change",()=>{b(v)}),v.addEventListener("blur",()=>{b(v)}));const f=s.querySelector("#email");f&&(f.addEventListener("input",()=>{E(f)}),f.addEventListener("change",()=>{E(f)}),f.addEventListener("blur",()=>{E(f)})),window.quoteFormValidation={validateZipCode:m,validateMovingDate:u,validateHomeSize:L,validateFullName:y,validatePhone:b,validateEmail:E,zipFromInput:a,zipToInput:i,movingDateInput:o,homeSizeRadios:c,fullNameInput:n,phoneInput:v,emailInput:f};const q=s.querySelector(".btn-next"),x=s.querySelector(".btn-submit");q&&x&&(q.onclick,q.addEventListener("click",function(r){const t=s.querySelector('div[data-step-mobile="4"]');if(t&&(t.style.display==="block"||t.style.display==="")){const e=y(n),l=b(v),p=E(f);if(e&&l&&p)return r.preventDefault(),r.stopPropagation(),x&&x.click(),!1}},!0))}if(s){let m=function(){if(h)return;h=!0;const a=s.dataset.redirectUrl||"index.html";console.log("Redirecting to "+a+"..."),L&&clearTimeout(L),L=setTimeout(()=>{window.location.href=a},2e3)},g=function(){const a=s.querySelector('div[data-step-mobile="5"]'),i=s.querySelector(".form-navigation"),o=s.querySelector(".btn-back");if(a&&(y=new MutationObserver(c=>{c.forEach(n=>{if(n.type==="attributes"&&n.attributeName==="style"&&(a.style.display==="block"||a.style.display==="")&&!h){i&&(i.style.display="none"),o&&(o.style.display="none");const f=document.querySelector(".form-footer-text");f&&(f.style.display="block"),setTimeout(()=>{m()},2e3)}})}),y.observe(a,{attributes:!0,attributeFilter:["style"]}),a.style.display==="block"||a.style.display==="")){i&&(i.style.display="none"),o&&(o.style.display="none");const c=document.querySelector(".form-footer-text");c&&(c.style.display="block"),setTimeout(()=>{m()},2e3)}},u=!1,L=null,h=!1,y=null;g();const b=a=>{if(console.log("formSent event received (success)",a),!a.detail||a.detail.form===s){const i=s.querySelector('div[data-step-mobile="5"]'),o=s.querySelector('div[data-step-mobile="4"]');if(i&&o){o.style.display="none",i.style.display="block";const c=document.querySelector(".progress-fill"),n=document.querySelector(".progress-percent");c&&n&&(c.style.width="100%",n.textContent="100%")}}};document.addEventListener("formSent",b,{once:!1}),new MutationObserver(a=>{a.forEach(i=>{if(i.type==="attributes"&&i.attributeName==="class"){const o=s.classList.contains("--sending");u&&!o&&!h&&(console.log("Form request completed (success or error), redirecting anyway..."),m()),u=o}})}).observe(s,{attributes:!0,attributeFilter:["class"]})}});
