"use strict";import{i as x}from"./index.min2.js";import"./common.min.js";window.addEventListener("load",()=>{x();const a=document.querySelector(".multi-step-form");if(a){let v=function(r){if(!r)return!1;const t=r.value.trim(),e=r.closest(".form-group"),o=e?.querySelector("[data-zip-error]");return o&&o.remove(),r.classList.remove("--form-error","--form-success"),e&&e.classList.remove("--form-error","--form-success"),t===""?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-zip-error>Zip code field can not be empty</div>")),!1):t.length!==5||!/^\d{5}$/.test(t)?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-zip-error>Wrong zip code format</div>")),!1):(r.classList.add("--form-success"),e&&e.classList.add("--form-success"),!0)},S=function(r){r&&(r.addEventListener("input",t=>{let e=t.target.value.replace(/\D/g,"");e.length>5&&(e=e.slice(0,5)),t.target.value=e,v(t.target)}),r.addEventListener("keypress",t=>{!/[0-9]/.test(t.key)&&!["Backspace","Delete","Tab","ArrowLeft","ArrowRight"].includes(t.key)&&t.preventDefault()}),r.addEventListener("paste",t=>{t.preventDefault();const o=(t.clipboardData||window.clipboardData).getData("text").replace(/\D/g,"").slice(0,5);r.value=o,v(r)}),r.addEventListener("blur",()=>{v(r)}))},L=function(r){if(!r)return!1;const t=r.value.trim(),e=r.closest(".form-group"),o=e?.querySelector("[data-date-error]");return o&&o.remove(),r.classList.remove("--form-error","--form-success"),e&&e.classList.remove("--form-error","--form-success"),t===""||t==="Select Move Date"?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-date-error>Please select a moving date</div>")),!1):(r.classList.add("--form-success"),e&&e.classList.add("--form-success"),!0)},g=function(){const r=a.querySelector(".home-size-options");if(!r)return!1;const t=Array.from(c).find(n=>n.checked),e=r.querySelector("[data-select-error]");if(r.classList.remove("--form-error","--form-success"),c.forEach(n=>{const p=n.closest(".home-size-option");p&&p.classList.remove("--form-error","--form-success")}),e&&(e.style.display="none",e.textContent=""),!t||!t.value)return r.classList.add("--form-error"),c.forEach(n=>{const p=n.closest(".home-size-option");p&&p.classList.add("--form-error")}),e&&(e.textContent="Please select a home size",e.style.display="block"),!1;r.classList.add("--form-success");const o=t.closest(".home-size-option");return o&&o.classList.add("--form-success"),!0},b=function(r){r&&(r.addEventListener("input",t=>{let e=t.target.value.replace(/[^a-zA-Z\s]/g,"");e=e.replace(/\s+/g," "),t.target.value=e,u(t.target)}),r.addEventListener("keypress",t=>{!/[a-zA-Z\s]/.test(t.key)&&!["Backspace","Delete","Tab","ArrowLeft","ArrowRight"].includes(t.key)&&t.preventDefault()}),r.addEventListener("paste",t=>{t.preventDefault();const o=(t.clipboardData||window.clipboardData).getData("text").replace(/[^a-zA-Z\s]/g,"").replace(/\s+/g," ");r.value=o,u(r)}))},u=function(r){if(!r)return!1;const t=r.value.trim(),e=r.closest(".form-group"),o=e?.querySelector("[data-name-error]");if(o&&o.remove(),r.classList.remove("--form-error","--form-success"),e&&e.classList.remove("--form-error","--form-success"),t==="")return r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-name-error>Full name field can not be empty</div>")),!1;const n=t.split(/\s+/).filter(T=>T.length>0);return n.length<2?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-name-error>Please enter first and last name</div>")),!1):n[0].length<3?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-name-error>First name must contain at least 3 letters</div>")),!1):n[n.length-1].length<3?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-name-error>Last name must contain at least 3 letters</div>")),!1):(r.classList.add("--form-success"),e&&e.classList.add("--form-success"),!0)},y=function(r){if(!r)return!1;const t=r.value.trim(),e=r.closest(".form-group"),o=e?.querySelector("[data-phone-error]");if(o&&o.remove(),r.classList.remove("--form-error","--form-success"),e&&e.classList.remove("--form-error","--form-success"),t===""||t==="+1(___) ___-____")return r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-phone-error>Phone field can not be empty</div>")),!1;const n=t.replace(/\D/g,"");return n.length<10||n.length>11?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-phone-error>Wrong phone number format</div>")),!1):t.includes("_")||t.includes("(")&&!t.match(/\+1\(\d{3}\)\s\d{3}-\d{4}/)?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-phone-error>Please enter a complete phone number</div>")),!1):/^\+1\(\d{3}\)\s\d{3}-\d{4}$/.test(t)?(r.classList.add("--form-success"),e&&e.classList.add("--form-success"),!0):(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-phone-error>Wrong phone number format</div>")),!1)},h=function(r){if(!r)return!1;const t=r.value.trim(),e=r.closest(".form-group"),o=e?.querySelector("[data-email-error]");return o&&o.remove(),r.classList.remove("--form-error","--form-success"),e&&e.classList.remove("--form-error","--form-success"),t===""?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-email-error>Email field can not be empty</div>")),!1):!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||!/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t)?(r.classList.add("--form-error"),e&&(e.classList.add("--form-error"),e.insertAdjacentHTML("beforeend","<div data-email-error>Wrong email format</div>")),!1):(r.classList.add("--form-success"),e&&e.classList.add("--form-success"),!0)};const i=a.querySelector("#zip-from"),l=a.querySelector("#zip-to");i&&S(i),l&&S(l);const s=a.querySelector("#moving-date");s&&(s.addEventListener("blur",()=>{L(s)}),s.addEventListener("input",()=>{L(s)}),s.addEventListener("change",()=>{L(s)}),setInterval(()=>{s.value&&s.value.trim()!==""&&s.value!=="Select Move Date"&&L(s)},300));const c=a.querySelectorAll('input[name="home_size"][type="radio"]');c.length>0&&c.forEach(r=>{r.addEventListener("change",()=>{g()})});const d=a.querySelector("#full-name");d&&(b(d),d.addEventListener("input",()=>{u(d)}),d.addEventListener("blur",()=>{u(d)}));const m=a.querySelector("#phone");m&&(m.addEventListener("input",()=>{y(m)}),m.addEventListener("change",()=>{y(m)}),m.addEventListener("blur",()=>{y(m)}));const f=a.querySelector("#email");f&&(f.addEventListener("input",()=>{h(f)}),f.addEventListener("change",()=>{h(f)}),f.addEventListener("blur",()=>{h(f)})),window.quoteFormValidation={validateZipCode:v,validateMovingDate:L,validateHomeSize:g,validateFullName:u,validatePhone:y,validateEmail:h,zipFromInput:i,zipToInput:l,movingDateInput:s,homeSizeRadios:c,fullNameInput:d,phoneInput:m,emailInput:f};const E=a.querySelector(".btn-next"),q=a.querySelector(".btn-submit");E&&q&&(E.onclick,E.addEventListener("click",function(r){const t=a.querySelector('div[data-step-mobile="4"]');if(t&&(t.style.display==="block"||t.style.display==="")){const e=u(d),o=y(m),n=h(f);if(e&&o&&n)return r.preventDefault(),r.stopPropagation(),q&&q.click(),!1}},!0))}if(a){let v=function(){b||(b=!0,console.log("Redirecting to index.html..."),g&&clearTimeout(g),g=setTimeout(()=>{window.location.href="index.html"},2e3))},S=function(){const i=a.querySelector('div[data-step-mobile="5"]'),l=a.querySelector(".form-navigation"),s=a.querySelector(".btn-back");if(i&&(u=new MutationObserver(c=>{c.forEach(d=>{if(d.type==="attributes"&&d.attributeName==="style"&&(i.style.display==="block"||i.style.display==="")&&!b){l&&(l.style.display="none"),s&&(s.style.display="none");const f=document.querySelector(".form-footer-text");f&&(f.style.display="block"),setTimeout(()=>{v()},2e3)}})}),u.observe(i,{attributes:!0,attributeFilter:["style"]}),i.style.display==="block"||i.style.display==="")){l&&(l.style.display="none"),s&&(s.style.display="none");const c=document.querySelector(".form-footer-text");c&&(c.style.display="block"),setTimeout(()=>{v()},2e3)}},L=!1,g=null,b=!1,u=null;S();const y=i=>{if(console.log("formSent event received (success)",i),!i.detail||i.detail.form===a){const l=a.querySelector('div[data-step-mobile="5"]'),s=a.querySelector('div[data-step-mobile="4"]');if(l&&s){s.style.display="none",l.style.display="block";const c=document.querySelector(".progress-fill"),d=document.querySelector(".progress-percent");c&&d&&(c.style.width="100%",d.textContent="100%")}}};document.addEventListener("formSent",y,{once:!1}),new MutationObserver(i=>{i.forEach(l=>{if(l.type==="attributes"&&l.attributeName==="class"){const s=a.classList.contains("--sending");L&&!s&&!b&&(console.log("Form request completed (success or error), redirecting anyway..."),v()),L=s}})}).observe(a,{attributes:!0,attributeFilter:["class"]})}});
